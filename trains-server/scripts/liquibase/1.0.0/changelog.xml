<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <!--    <changeSet id="1" author="Paul">-->
    <!--      <sql>-->
    <!--        CREATE EXTENSION IF NOT EXISTS "uuid-ossp";-->
    <!--        CREATE EXTENSION IF NOT EXISTS "pgcrypto";-->
    <!--        CREATE EXTENSION IF NOT EXISTS "autoinc";-->
    <!--        CREATE EXTENSION IF NOT EXISTS "cube";-->
    <!--        CREATE EXTENSION IF NOT EXISTS "earthdistance";-->
    <!--        ALTER USER trains WITH NOSUPERUSER;-->
    <!--      </sql>-->
    <!--      &lt;!&ndash; impossible to rollback this one, but if it got this far with the rollback, just rerun create.sql &ndash;&gt;-->
    <!--    </changeSet>-->

    <changeSet id="99" author="Paul">
        <tagDatabase tag="initial"/>
    </changeSet>

    <changeSet id="100" author="Paul">
        <createTable tableName="USERS">
            <column name="ID" type="${uuid_type}" defaultValueComputed="${uuid_function}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="VERSION" type="INTEGER" defaultValue="0"/>
            <column name="CREATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="DELETED" type="DATETIME"/>
            <column name="USERNAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="PASSWORD" type="VARCHAR(512)">
                <constraints nullable="false"/>
            </column>
            <column name="EMAIL" type="VARCHAR(512)">
                <constraints nullable="false"/>
            </column>
            <column name="SCOPE" type="VARCHAR(20)" defaultValue="USERS">

            </column>
        </createTable>
    </changeSet>

    <changeSet id="110" author="Paul">
        <createIndex tableName="USERS" indexName="USERS_NAME" unique="true">
            <column name="USERNAME"></column>
        </createIndex>
    </changeSet>

    <changeSet id="120" author="Paul">
        <createIndex tableName="USERS" indexName="USERS_EMAIL" unique="true">
            <column name="EMAIL"></column>
        </createIndex>
    </changeSet>

    <changeSet id="200" author="Paul">
        <createTable tableName="PLACES">
            <column name="ID" type="${uuid_type}" defaultValueComputed="${uuid_function}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="VERSION" type="INTEGER" defaultValue="0"/>
            <column name="CREATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="DELETED" type="DATETIME"/>
            <column name="NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR(250)">
                <constraints nullable="false"/>
            </column>
            <column name="TYPE" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="LAT" type="FLOAT">
                <constraints nullable="false"/>
            </column>
            <column name="LONG" type="FLOAT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="210" author="Paul">
        <createIndex tableName="PLACES" indexName="POINTS_NAME">
            <column name="NAME"></column>
        </createIndex>
    </changeSet>

    <changeSet id="300" author="Paul">
        <createTable tableName="POSTS">
            <column name="ID" type="${uuid_type}" defaultValueComputed="${uuid_function}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="VERSION" type="INTEGER" defaultValue="0"/>
            <column name="CREATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="DELETED" type="DATETIME"/>
            <column name="TITLE" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="CONTENT" type="VARCHAR(250)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="400" author="Paul">
        <createTable tableName="TRANSLATIONS">
            <column name="ID" type="${uuid_type}" defaultValueComputed="${uuid_function}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="VERSION" type="INTEGER" defaultValue="0"/>
            <column name="CREATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="DELETED" type="DATETIME"/>
            <column name="LANGUAGE" type="VARCHAR(10)">
                <constraints nullable="false"/>
            </column>
            <column name="KEY" type="VARCHAR(250)">
                <constraints nullable="false"/>
            </column>
            <column name="CONTENT" type="VARCHAR(2000)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="500" author="Paul">
        <createTable tableName="VEHICLE_TYPES">
            <column name="ID" type="${uuid_type}" defaultValueComputed="${uuid_function}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="VERSION" type="INTEGER" defaultValue="0"/>
            <column name="CREATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="UPDATED" type="DATETIME" defaultValueComputed="now()">
                <constraints nullable="false"/>
            </column>
            <column name="DELETED" type="DATETIME"/>

            <column name="TYPE" type="VARCHAR(20)">
                <constraints nullable="false"/>
            </column>
            <column name="NAME" type="VARCHAR(250)">
                <constraints nullable="false"/>
            </column>
            <column name="DEFAULT_NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR(250)"></column>
            <column name="CONTENT" type="VARCHAR(2000)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>

</databaseChangeLog>
